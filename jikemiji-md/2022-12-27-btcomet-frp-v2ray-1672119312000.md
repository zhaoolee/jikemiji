---
title: 为笔记本电脑绑定公网IP随时随地BT做种完整方案（frp加v2ray配合比特彗星点亮绿灯）
---

BT做种需要拥有固定的IP(IPV4)和端口，如果想在拥有固定IP的服务端做种，可以直接参考前一期https://www.v2fy.com/p/2022-12-25-bt-1671963832000/ ，如果想使用笔记本随时随地做种，那就需要拥有固定IP的服务器进行流量转发。

本篇教程的思路是，在服务端和客户端配置安装frp和v2ray, 实现固定IP服务器（本文以阿里云轻量云服务器为例）与客户端（笔记本电脑）流量的双向绑定。

frp和v2ray都包含服务端和客户端两部分，我们会在阿里云安装frp和v2ray的服务端程序，在笔记本安装frp和v2ray的客户端程序。

BT的本质是p2p，也就是实现客户端之间的连接，连接分为「我向别人发数据」和「别人向我发数据」，v2ray可以实现「我向别人发数据」，frp可以实现「别人向我发数据」。

这里有个小细节，v2ray的客户端无法直接集成到bt软件中，所以，我们需要为bt软件（比特彗星）配置代理，连接到v2ray客户端，然后v2ray客户端将代理的流量转发到已安装v2ray服务端的阿里云。

考虑到Windows用户较多，本文以Windows作为客户端举例。（我用MacBook M芯片模拟了Windows虚拟机进行部署，采用arm版的frpc, 大家请按自己的机型选用合适的frpc版本）

## 在服务器端（frp）安装并启动frps

```
cd /opt/
sudo wget https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_linux_386.tar.gz
sudo tar zxvf frp_0.46.0_linux_386.tar.gz
cd /opt/frp_0.46.0_linux_386
```
编辑frps.ini, 添加token字段
```
[common]
bind_port = 7000
token = 'frp连接密码'
```

设置开机启动

```
vim /etc/systemd/system/frps.service
```

在frps.service中写入内容
```
[Unit]
# 服务名称，可自定义
Description = frp server
After = network.target syslog.target
Wants = network.target

[Service]
Type = simple
# 启动frps的命令，需修改为您的frps的安装路径
ExecStart = /opt/frp_0.46.0_linux_386/frps -c /opt/frp_0.46.0_linux_386/frps.ini

[Install]
WantedBy = multi-user.target
```

```
# 启动frp
systemctl start frps
# 停止frp
systemctl stop frps
# 重启frp
systemctl restart frps
# 查看frp状态
systemctl status frps
# 配置 frps 开机自启
systemctl enable frps
```


## 在客户端安装并启动frpc

frp下载地址: https://github.com/fatedier/frp/releases/

![下载](https://cdn.fangyuanxiaozhan.com/assets/1672119350779pwjRB4PH.png)

绝大多数Windows笔记本下载这个包：https://github.com/fatedier/frp/releases/download/v0.46.0/frp_0.46.0_windows_386.zip

MacBook M系芯片Windows虚拟机下载这个包: https://github.com/fatedier/frp/releases/#:~:text=frp_0.46.0_windows_amd64.zip

- 解压下载好的压缩包, 修改frpc.ini ，参考配置如下

![修改frpc.ini](https://cdn.fangyuanxiaozhan.com/assets/1672119351031zjJCytYe.png)


```
[common]
server_addr = 47.242.12.38
server_port = 7000
token = 'frp连接密码'
protocol = websocket
tls_enable = true

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000

[bt tcp]
type = tcp
local_ip = 127.0.0.1
local_port = 51418
remote_port = 51418

[bt udp]
type = udp
local_ip = 127.0.0.1
local_port = 51418
remote_port = 51418
```

这里我们开放了51418端口，如果其它用户访问阿里云服务端的51418端口，数据将直接转发到笔记本的51418端口 (记得在阿里云防火墙开放51418端口，否则下一步的frpc无法连接成功)

- 使用命令行启动frp客户端frpc
```
 .\frpc.exe -c .\frpc.ini
```
![运行成功](https://cdn.fangyuanxiaozhan.com/assets/1672119350712MP3idkAs.png)



### 安装并启动V2ray服务端

- 运行一键安装脚本
```
cd /opt
sudo apt install -y curl
sudo bash <(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)

sudo wget https://raw.githubusercontent.com/bannedbook/fanqiang/master/v2ss/server-cfg/v2/config.json  -O -> /usr/local/etc/v2ray/config.json
```

- 修改config.json的中的配置

```
sudo vim /usr/local/etc/v2ray/config.json
```

![修改字段](https://cdn.fangyuanxiaozhan.com/assets/1672119350848JRaR5bNw.png)

这里注意 port 字段对应的端口，阿里云防火墙记得放行，否则v2ray客户端无法连接

- 测试配置文件格式是否正常

```
/usr/local/bin/v2ray test -config /usr/local/etc/v2ray/config.json
```
![测试正常](https://cdn.fangyuanxiaozhan.com/assets/1672119351028JEsAeAeN.png)

- 重启v2ray

```
service v2ray restart
```

参考资料: https://github.com/bannedbook/fanqiang/blob/master/v2ss/%E8%87%AA%E5%BB%BAV2ray%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B.md 

https://github.com/bannedbook/fanqiang/blob/master/v2ss/V2ray%E5%AE%98%E6%96%B9%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC.md


服务端安装完成后，配置Windows V2ray客户端


## 配置V2ray客户端


下载这个包 https://github.com/2dust/v2rayN/releases/download/5.39/v2rayN-Core.zip ， 解压

- 运行v2rayN.exe

![运行](https://cdn.fangyuanxiaozhan.com/assets/1672119351184MHfJFmpf.png)

- 添加配置

![添加配置](https://cdn.fangyuanxiaozhan.com/assets/1672119351275Pps0ssXX.png)

![确定](https://cdn.fangyuanxiaozhan.com/assets/1672119351487sJ43DEDe.png)

![配置成功](https://cdn.fangyuanxiaozhan.com/assets/1672119351563CYMTtT3F.png)


## 安装配置比特彗星

- 首先保证frp 和 v2ray客户端正常运行

![运行](https://cdn.fangyuanxiaozhan.com/assets/1672119351771GMw526HY.png)


前往官网 https://www.bitcomet.com/cn 下载安装运行比特彗星

- 为比特彗星配置51418端口（对应frp内网穿透的51418）


![配置51418端口](https://cdn.fangyuanxiaozhan.com/assets/1672119352306NcReJ3y2.png)

- 为比特彗星配置代理

![配置代理](https://cdn.fangyuanxiaozhan.com/assets/1672119352702THBpErw0.png)

- 成功 

![成功](https://cdn.fangyuanxiaozhan.com/assets/16721193532403GKbGAb0.png)


## 小结

本文介绍的方案，可以极低的流量消耗，随时随地向多人做种共享数据，也可以让你的服务器物尽其用。
如果你是种子爱好者，即使家里没有固定IP，也可以采用本文的方案，点亮你的绿灯，提升BT下载速度，也为其它用户下载提速带来方便。

## 本文永久更新地址(欢迎来读留言,写评论):

[https://www.v2fy.com/p/2022-12-27-btcomet-frp-v2ray-1672119312000](https://www.v2fy.com/p/2022-12-27-btcomet-frp-v2ray-1672119312000)
